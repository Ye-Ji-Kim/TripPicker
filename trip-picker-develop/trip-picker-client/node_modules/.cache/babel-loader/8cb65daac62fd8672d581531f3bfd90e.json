{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/roeniss/Desktop/workspace/sinsudong-crusher/trip-picker-develop/trip-picker-client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/Users/roeniss/Desktop/workspace/sinsudong-crusher/trip-picker-develop/trip-picker-client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/roeniss/Desktop/workspace/sinsudong-crusher/trip-picker-develop/trip-picker-client/src/pages/FeedItems.js\";\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteral([\"\\n  position:absolute;\\n  height:20px;\\n  width:20px;\\n  border:1px red solid;\\n  background-color:blue\\n  bottom:10px;\\n  left:10px\\n  &.liked{\\n    background-color:green\\n  }\\n\"]);\n\n  _templateObject4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteral([\"\\n  position:absolute;\\n  height:20px;\\n  width:20px;\\n  border:1px red solid;\\n  background-color:yellow\\n  top:10px;\\n  left:10px;\\n  &.bookmarked{\\n    background-color:red;\\n  }\\n\"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  width: 100px;\\n  height: 100px;\\n  margin: 10px;\\n  border: 1px red solid;\\n  text-align: center;\\n  background-size: cover;\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-around;\\n  flex-wrap: wrap;\\n  margin: 0 auto;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useContext, useState } from \"react\";\nimport { DispatchContext, StateContext } from \"../App\";\nimport styled from \"styled-components\";\nimport { axios } from \"../customAxios\";\nimport Detail from \"../modals/Detail\";\n\nconst FeedItems = () => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        detail = _useState2[0],\n        setDetail = _useState2[1];\n\n  const dispatch = useContext(DispatchContext);\n  const state = useContext(StateContext);\n\n  const toggleFavorite = (e, item) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const contentIdx = item.contentIdx;\n    const data = {\n      userIdx: state.get(\"id\"),\n      contentIdx\n    };\n\n    if (item.liked) {\n      axios(\"REMOVE_FAVORITE\", dispatch, data);\n      e.target.classList.remove(\"liked\");\n    } else {\n      axios(\"ADD_FAVORITE\", dispatch, data);\n      e.target.classList.add(\"liked\");\n    }\n  };\n\n  const toggleLike = (e, targetId) => {\n    // const { contentIdx, categoryCode, subCategoryCode } = item;\n    // const data = { userIdx: state.get(\"id\"), contentIdx, categoryCode, subCategoryCode };\n    // if (item.liked) {\n    //   axios(\"REMOVE_FAVORITE\", dispatch, data);\n    //   e.target.classList.remove(\"liked\");\n    // } else {\n    //   axios(\"ADD_FAVORITE\", dispatch, data);\n    //   e.target.classList.add(\"liked\");\n    // }\n    e.preventDefault();\n    e.stopPropagation();\n    let likes = state.get(\"likes\");\n    const idx = likes.indexOf(targetId);\n\n    if (idx > -1) {\n      likes.splice(idx, 1);\n      e.target.classList.remove(\"liked\");\n    } else {\n      likes.push(targetId);\n      e.target.classList.add(\"liked\");\n    }\n\n    axios(\"UPDATE_LIKES\", dispatch, {\n      likes\n    });\n  };\n\n  const showDetails = (e, targetId) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const target = state.get(\"feed\").filter(each => each.number === targetId);\n    setDetail(target[0]);\n  };\n\n  const closeModal = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDetail(false);\n  };\n\n  const addDynamicClassNames = item => {\n    let names = \"\";\n    if (item.liked) names += \" liked \";\n    if (item.bookmarked) names += \" bookmarked \";\n    return names;\n  };\n\n  const items = () => {\n    return state.get(\"feed\").map((item, index) => // TODO: 렌더링 때부터 (state를 따로 가지고 있길 바라는) 좋아요 데이터와 매칭시켜, like 또는 non-like 표시\n    React.createElement(FlexChild, {\n      onClick: e => showDetails(e, item.contentIdx),\n      className: addDynamicClassNames(item),\n      style: {\n        backgroundImage: \"url(\".concat(item.imageUrl, \")\")\n      },\n      key: item.contentIdx,\n      id: item.contentIdx,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(ToggleFavoriteButton, {\n      onClick: e => toggleFavorite(e, item),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), \" \", React.createElement(ToggleLikeButton, {\n      onClick: e => toggleLike(e, item),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), \" \"));\n  };\n\n  return React.createElement(React.Fragment, null, detail ? React.createElement(Detail, {\n    target: detail,\n    closeModal: closeModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }) : null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"\\uD604\\uC7AC \\uC120\\uD0DD\\uB41C \\uC9C0\\uC5ED: \", state.get(\"region\")), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"\\uD604\\uC7AC \\uC120\\uD0DD\\uB41C \\uD37C\\uC18C\\uB110\\uB9AC\\uD2F0 : \", state.get(\"personality\")), React.createElement(FlexParent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, items()));\n};\n\nconst FlexParent = styled.div(_templateObject());\nconst FlexChild = styled.div(_templateObject2());\nconst ToggleFavoriteButton = styled.div(_templateObject3());\nconst ToggleLikeButton = styled.div(_templateObject4());\nexport default FeedItems;","map":{"version":3,"sources":["/Users/roeniss/Desktop/workspace/sinsudong-crusher/trip-picker-develop/trip-picker-client/src/pages/FeedItems.js"],"names":["React","useContext","useState","DispatchContext","StateContext","styled","axios","Detail","FeedItems","detail","setDetail","dispatch","state","toggleFavorite","e","item","preventDefault","stopPropagation","contentIdx","data","userIdx","get","liked","target","classList","remove","add","toggleLike","targetId","likes","idx","indexOf","splice","push","showDetails","filter","each","number","closeModal","addDynamicClassNames","names","bookmarked","items","map","index","backgroundImage","imageUrl","FlexParent","div","FlexChild","ToggleFavoriteButton","ToggleLikeButton"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,eAAT,EAA0BC,YAA1B,QAA8C,QAA9C;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA,oBACMN,QAAQ,CAAC,KAAD,CADd;AAAA;AAAA,QACfO,MADe;AAAA,QACPC,SADO;;AAGtB,QAAMC,QAAQ,GAAGV,UAAU,CAACE,eAAD,CAA3B;AACA,QAAMS,KAAK,GAAGX,UAAU,CAACG,YAAD,CAAxB;;AAEA,QAAMS,cAAc,GAAG,CAACC,CAAD,EAAIC,IAAJ,KAAa;AAClCD,IAAAA,CAAC,CAACE,cAAF;AACAF,IAAAA,CAAC,CAACG,eAAF;AAFkC,UAG1BC,UAH0B,GAGXH,IAHW,CAG1BG,UAH0B;AAIlC,UAAMC,IAAI,GAAG;AAAEC,MAAAA,OAAO,EAAER,KAAK,CAACS,GAAN,CAAU,IAAV,CAAX;AAA4BH,MAAAA;AAA5B,KAAb;;AACA,QAAIH,IAAI,CAACO,KAAT,EAAgB;AACdhB,MAAAA,KAAK,CAAC,iBAAD,EAAoBK,QAApB,EAA8BQ,IAA9B,CAAL;AACAL,MAAAA,CAAC,CAACS,MAAF,CAASC,SAAT,CAAmBC,MAAnB,CAA0B,OAA1B;AACD,KAHD,MAGO;AACLnB,MAAAA,KAAK,CAAC,cAAD,EAAiBK,QAAjB,EAA2BQ,IAA3B,CAAL;AACAL,MAAAA,CAAC,CAACS,MAAF,CAASC,SAAT,CAAmBE,GAAnB,CAAuB,OAAvB;AACD;AACF,GAZD;;AAcA,QAAMC,UAAU,GAAG,CAACb,CAAD,EAAIc,QAAJ,KAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAd,IAAAA,CAAC,CAACE,cAAF;AACAF,IAAAA,CAAC,CAACG,eAAF;AACA,QAAIY,KAAK,GAAGjB,KAAK,CAACS,GAAN,CAAU,OAAV,CAAZ;AACA,UAAMS,GAAG,GAAGD,KAAK,CAACE,OAAN,CAAcH,QAAd,CAAZ;;AACA,QAAIE,GAAG,GAAG,CAAC,CAAX,EAAc;AACZD,MAAAA,KAAK,CAACG,MAAN,CAAaF,GAAb,EAAkB,CAAlB;AACAhB,MAAAA,CAAC,CAACS,MAAF,CAASC,SAAT,CAAmBC,MAAnB,CAA0B,OAA1B;AACD,KAHD,MAGO;AACLI,MAAAA,KAAK,CAACI,IAAN,CAAWL,QAAX;AACAd,MAAAA,CAAC,CAACS,MAAF,CAASC,SAAT,CAAmBE,GAAnB,CAAuB,OAAvB;AACD;;AACDpB,IAAAA,KAAK,CAAC,cAAD,EAAiBK,QAAjB,EAA2B;AAAEkB,MAAAA;AAAF,KAA3B,CAAL;AACD,GAtBD;;AAwBA,QAAMK,WAAW,GAAG,CAACpB,CAAD,EAAIc,QAAJ,KAAiB;AACnCd,IAAAA,CAAC,CAACE,cAAF;AACAF,IAAAA,CAAC,CAACG,eAAF;AACA,UAAMM,MAAM,GAAGX,KAAK,CAACS,GAAN,CAAU,MAAV,EAAkBc,MAAlB,CAAyBC,IAAI,IAAIA,IAAI,CAACC,MAAL,KAAgBT,QAAjD,CAAf;AACAlB,IAAAA,SAAS,CAACa,MAAM,CAAC,CAAD,CAAP,CAAT;AACD,GALD;;AAOA,QAAMe,UAAU,GAAGxB,CAAC,IAAI;AACtBA,IAAAA,CAAC,CAACE,cAAF;AACAF,IAAAA,CAAC,CAACG,eAAF;AACAP,IAAAA,SAAS,CAAC,KAAD,CAAT;AACD,GAJD;;AAMA,QAAM6B,oBAAoB,GAAGxB,IAAI,IAAI;AACnC,QAAIyB,KAAK,GAAG,EAAZ;AACA,QAAIzB,IAAI,CAACO,KAAT,EAAgBkB,KAAK,IAAI,SAAT;AAChB,QAAIzB,IAAI,CAAC0B,UAAT,EAAqBD,KAAK,IAAI,cAAT;AACrB,WAAOA,KAAP;AACD,GALD;;AAOA,QAAME,KAAK,GAAG,MAAM;AAClB,WAAO9B,KAAK,CAACS,GAAN,CAAU,MAAV,EAAkBsB,GAAlB,CAAsB,CAAC5B,IAAD,EAAO6B,KAAP,KAC3B;AACA,wBAAC,SAAD;AAAW,MAAA,OAAO,EAAE9B,CAAC,IAAIoB,WAAW,CAACpB,CAAD,EAAIC,IAAI,CAACG,UAAT,CAApC;AAA0D,MAAA,SAAS,EAAEqB,oBAAoB,CAACxB,IAAD,CAAzF;AAAiG,MAAA,KAAK,EAAE;AAAE8B,QAAAA,eAAe,gBAAS9B,IAAI,CAAC+B,QAAd;AAAjB,OAAxG;AAAsJ,MAAA,GAAG,EAAE/B,IAAI,CAACG,UAAhK;AAA4K,MAAA,EAAE,EAAEH,IAAI,CAACG,UAArL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,oBAAD;AAAsB,MAAA,OAAO,EAAEJ,CAAC,IAAID,cAAc,CAACC,CAAD,EAAIC,IAAJ,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,OAEE,oBAAC,gBAAD;AAAkB,MAAA,OAAO,EAAED,CAAC,IAAIa,UAAU,CAACb,CAAD,EAAIC,IAAJ,CAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,MAFK,CAAP;AAOD,GARD;;AAUA,SACE,0CACGN,MAAM,GAAG,oBAAC,MAAD;AAAQ,IAAA,MAAM,EAAEA,MAAhB;AAAwB,IAAA,UAAU,EAAE6B,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAwD,IADjE,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uDAAiB1B,KAAK,CAACS,GAAN,CAAU,QAAV,CAAjB,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0EAAqBT,KAAK,CAACS,GAAN,CAAU,aAAV,CAArB,CAHF,EAIE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAaqB,KAAK,EAAlB,CAJF,CADF;AAQD,CAlFD;;AAoFA,MAAMK,UAAU,GAAG1C,MAAM,CAAC2C,GAAV,mBAAhB;AAMA,MAAMC,SAAS,GAAG5C,MAAM,CAAC2C,GAAV,oBAAf;AASA,MAAME,oBAAoB,GAAG7C,MAAM,CAAC2C,GAAV,oBAA1B;AAYA,MAAMG,gBAAgB,GAAG9C,MAAM,CAAC2C,GAAV,oBAAtB;AAYA,eAAexC,SAAf","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { DispatchContext, StateContext } from \"../App\";\nimport styled from \"styled-components\";\nimport { axios } from \"../customAxios\";\nimport Detail from \"../modals/Detail\";\n\nconst FeedItems = () => {\n  const [detail, setDetail] = useState(false);\n\n  const dispatch = useContext(DispatchContext);\n  const state = useContext(StateContext);\n\n  const toggleFavorite = (e, item) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { contentIdx } = item;\n    const data = { userIdx: state.get(\"id\"), contentIdx };\n    if (item.liked) {\n      axios(\"REMOVE_FAVORITE\", dispatch, data);\n      e.target.classList.remove(\"liked\");\n    } else {\n      axios(\"ADD_FAVORITE\", dispatch, data);\n      e.target.classList.add(\"liked\");\n    }\n  };\n\n  const toggleLike = (e, targetId) => {\n    // const { contentIdx, categoryCode, subCategoryCode } = item;\n    // const data = { userIdx: state.get(\"id\"), contentIdx, categoryCode, subCategoryCode };\n    // if (item.liked) {\n    //   axios(\"REMOVE_FAVORITE\", dispatch, data);\n    //   e.target.classList.remove(\"liked\");\n    // } else {\n    //   axios(\"ADD_FAVORITE\", dispatch, data);\n    //   e.target.classList.add(\"liked\");\n    // }\n    e.preventDefault();\n    e.stopPropagation();\n    let likes = state.get(\"likes\");\n    const idx = likes.indexOf(targetId);\n    if (idx > -1) {\n      likes.splice(idx, 1);\n      e.target.classList.remove(\"liked\");\n    } else {\n      likes.push(targetId);\n      e.target.classList.add(\"liked\");\n    }\n    axios(\"UPDATE_LIKES\", dispatch, { likes });\n  };\n\n  const showDetails = (e, targetId) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const target = state.get(\"feed\").filter(each => each.number === targetId);\n    setDetail(target[0]);\n  };\n\n  const closeModal = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDetail(false);\n  };\n\n  const addDynamicClassNames = item => {\n    let names = \"\";\n    if (item.liked) names += \" liked \";\n    if (item.bookmarked) names += \" bookmarked \";\n    return names;\n  };\n\n  const items = () => {\n    return state.get(\"feed\").map((item, index) => (\n      // TODO: 렌더링 때부터 (state를 따로 가지고 있길 바라는) 좋아요 데이터와 매칭시켜, like 또는 non-like 표시\n      <FlexChild onClick={e => showDetails(e, item.contentIdx)} className={addDynamicClassNames(item)} style={{ backgroundImage: `url(${item.imageUrl})` }} key={item.contentIdx} id={item.contentIdx}>\n        <ToggleFavoriteButton onClick={e => toggleFavorite(e, item)} /> {/* TODO: 어떤 값으로 즐겨찾기를 보관하는지 확인 */}\n        <ToggleLikeButton onClick={e => toggleLike(e, item)} /> {/* TODO: 어떤 값으로 즐겨찾기를 보관하는지 확인 */}\n      </FlexChild>\n    ));\n  };\n\n  return (\n    <>\n      {detail ? <Detail target={detail} closeModal={closeModal} /> : null}\n      <div>현재 선택된 지역: {state.get(\"region\")}</div>\n      <div>현재 선택된 퍼소널리티 : {state.get(\"personality\")}</div>\n      <FlexParent>{items()}</FlexParent>\n    </>\n  );\n};\n\nconst FlexParent = styled.div`\n  display: flex;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  margin: 0 auto;\n`;\nconst FlexChild = styled.div`\n  position: relative;\n  width: 100px;\n  height: 100px;\n  margin: 10px;\n  border: 1px red solid;\n  text-align: center;\n  background-size: cover;\n`;\nconst ToggleFavoriteButton = styled.div`\n  position:absolute;\n  height:20px;\n  width:20px;\n  border:1px red solid;\n  background-color:yellow\n  top:10px;\n  left:10px;\n  &.bookmarked{\n    background-color:red;\n  }\n`;\nconst ToggleLikeButton = styled.div`\n  position:absolute;\n  height:20px;\n  width:20px;\n  border:1px red solid;\n  background-color:blue\n  bottom:10px;\n  left:10px\n  &.liked{\n    background-color:green\n  }\n`;\nexport default FeedItems;\n"]},"metadata":{},"sourceType":"module"}